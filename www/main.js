// Generated by CoffeeScript 1.6.3
(function() {
  window.addEventListener('load', function() {
    var editor, env, socket;
    window.env = env = {};
    env.editor = editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/python");
    env.socket = socket = io.connect("//localhost");
    socket.on('init', function(data) {
      return editor.setValue(data);
    });
    socket.on('button', function(_arg) {
      var btn, name, sidebar, title;
      title = _arg.title, name = _arg.name;
      btn = document.createElement('button');
      btn.innerText = title;
      btn.onclick = function() {
        var box;
        box = {
          name: name,
          source: editor.getValue()
        };
        return socket.emit('button', box);
      };
      sidebar = document.getElementById('sidebar');
      return sidebar.appendChild(btn);
    });
    return socket.on("inject", function(code) {
      return CoffeeScript.run(code);
    });
  });

}).call(this);
